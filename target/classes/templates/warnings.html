<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>Warnings</title>
    <style>
        body { font-family: system-ui, sans-serif; margin: 20px; }
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #ddd; padding: 8px; }
        th { background: #f0f0f0; text-align: left; }
        .time { white-space: nowrap; }
        .msg { color: #b45309; }
        .detail { color: #6b7280; font-size: 0.9em; }
    </style>
    <script>
        async function loadLogs() {
            const res = await fetch('/api/admin/error-logs');
            if (!res.ok) return;
            const data = await res.json();
            const items = (data && data.data && data.data.items) || [];
            const tbody = document.getElementById('tbody');
            tbody.innerHTML = '';
            for (const it of items) {
                const tr = document.createElement('tr');
                const tdTime = document.createElement('td');
                tdTime.className = 'time';
                tdTime.textContent = it.time;
                const tdMsg = document.createElement('td');
                tdMsg.className = 'msg';
                tdMsg.textContent = it.message;
                const tdDetail = document.createElement('td');
                tdDetail.className = 'detail';
                tdDetail.textContent = it.detail || '';
                tr.appendChild(tdTime);
                tr.appendChild(tdMsg);
                tr.appendChild(tdDetail);
                tbody.appendChild(tr);
            }
        }
        window.addEventListener('DOMContentLoaded', loadLogs);
    </script>
    </head>
<body>
    <h2>Warnings / Error Logs</h2>
    <p>Short pairing orphan halves and other generation warnings appear here.</p>
    <table>
        <thead>
            <tr>
                <th>Time</th>
                <th>Message</th>
                <th>Detail</th>
            </tr>
        </thead>
        <tbody id="tbody"></tbody>
    </table>
    <p>
        <button onclick="loadLogs()">Reload</button>
        <a href="/dashboard" style="margin-left:12px;">Back to Dashboard</a>
    </p>
</body>
</html>

